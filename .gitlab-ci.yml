include:
  - project: dbp/ci_templates
    ref: latest
    file:
      - /pipelines/facade_chart.yaml

###
# Required group/project vars:
#
# NEXUS_REPOSITORY
# HELM_REPOSITORY
# NEXUS_DOCKER_REGISTRY
# NEXUS_USER
# NEXUS_PASSWORD
# PROJECT_ACCESS_TOKEN
###
variables:
  # BASE
  PROJECT_NAME: rb-api-system-calendar
  SETUP_ENVIRONMENTS_FILE: setup.env
  ### Helm
  # Space separated list of Helm chart directories to package,
  # specified in order of dependency (i.e. 1st chart should not have local dependencies at all).
  HELM_CHARTS: helm/api-system-calendar-facade helm/api-system-calendar-review
  ### Stand deployment
  # for review stand
  REVIEW_STAND_CHART: $PROJECT_NAME-facade-review-$BUILD_VERSION.tgz
  REVIEW_STAND_CHART_OPTIONS: --wait-for-jobs
  RELEASE_HELM_CHARTS: $PROJECT_NAME-facade $PROJECT_NAME-facade-review
  # for dev stand
  DEV_STAND_CHART: $PROJECT_NAME-review-$BUILD_VERSION.tgz

  STAND_VALUES_TEMPLATE: helm/stand-values.yaml
  # docs
  ASCIIDOC_ENABLED: "true"
  DOCS_BUILD_DIR: docs/build/docs/asciidocPdf/ru
  HELM_DEPLOY_TIMEOUT: 10m
